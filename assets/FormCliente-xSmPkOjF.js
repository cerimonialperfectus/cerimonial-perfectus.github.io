import{a as E,r as d,j as e,L as F}from"./index-FEUtmEKI.js";import{f as M,b as P,c as R,a as w}from"./utils-DFDuN5bX.js";import{M as c,B as I}from"./Modal-R2-5ZBsl.js";import"./Transition-CllzQJyI.js";import"./TransitionGroupContext-QBMk-fzG.js";const T="http://localhost:3000",x=`${T}/customers`,J=()=>{const{id:p}=E(),[o,r]=d.useState({nome:"",cpfcnpj:"",dataNascimento:"",telefone:"",telefoneCelular:"",email:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:""}),[N,h]=d.useState(!1),[b,m]=d.useState(""),[j,u]=d.useState("success"),[L,f]=d.useState(!1);d.useEffect(()=>{p&&fetch(`${x}/getCustomerById/${p}`).then(a=>a.json()).then(a=>{r({data:a,id:a.id,cpfcnpj:a.cpfcnpj,identidade:a.identidade,nome:a.nome,email:a.email,dataNascimento:a.dataNascimento,cep:a.cep,telefone:a.telefone,telefoneCelular:a.telefoneCelular,logradouro:a.logradouro,numero:a.numero,complemento:a.complemento,bairro:a.bairro,cidade:a.cidade,uf:a.uf,createdAt:a.createdAt,createdBy:a.createdBy,updatedAt:a.updatedAt,updatedBy:a.updatedBy})}).catch(()=>{u("error"),m("Erro ao carregar dados do cliente."),h(!0)})},[p]);const l=a=>{const{name:t,value:s}=a.target;r(i=>({...i,[t]:s}))},C=async a=>{a.preventDefault(),f(!0);const t=localStorage.getItem("TokenCerimonial"),s=o.id!==void 0&&o.id!==null&&o.id!==""?`${x}/saveCustomer`:`${x}/createCustomer`;console.log(s+" - "+o.id);try{const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(o,null,2)}),n=await i.json().catch(()=>null);console.log(JSON.stringify(o,null,2)),i.ok?(u("success"),m(o.id?"Cliente atualizado com sucesso!":"Cliente cadastrado com sucesso!"),o.id||r({data:n,id:n.id,cpfcnpj:n.cpfcnpj,identidade:n.identidade,nome:n.nome,email:n.email,dataNascimento:n.dataNascimento,cep:n.cep,telefone:n.telefone,telefoneCelular:n.telefoneCelular,logradouro:n.logradouro,numero:n.numero,complemento:n.complemento,bairro:n.bairro,cidade:n.cidade,uf:n.uf,createdAt:n.createdAt,createdBy:n.createdBy,updatedAt:n.updatedAt,updatedBy:n.updatedBy})):(u("error"),m((n==null?void 0:n.error)||"Erro ao salvar cliente."))}catch(i){console.error("Erro no fetch:",i),u("error"),m("Erro de conexão com o servidor.")}finally{f(!1),h(!0)}},v=()=>h(!1),g=()=>j==="success"?"success":"danger",y=a=>{l(a);const t=M(a.target.value);r(s=>({...s,cpfcnpj:t}))},S=a=>{l(a);const t=P(a.target.value);r(s=>({...s,cep:t}))},A=a=>{l(a);const t=R(a.target.value);r(s=>({...s,telefone:t}))},B=a=>{l(a);const t=w(a.target.value);r(s=>({...s,telefoneCelular:t}))};return e.jsx(e.Fragment,{children:e.jsx("section",{children:e.jsxs("form",{onSubmit:C,children:[e.jsx("div",{className:"row p-1 px-3",children:e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsxs(F,{to:"/ClienteIndex",className:"btn btn btn-outline-dark btn-md px-4 mt-1 mb-1 me-2",children:[e.jsx("i",{className:"fa fa-reply"})," ",e.jsx("span",{className:"hidden-xs",children:" Voltar Filtro "})]}),e.jsxs("button",{id:"btnSalvar",type:"submit",className:"btn btn-primary btn-md px-5 mt-1 mb-1",children:[e.jsx("i",{className:"fa fa-check"}),e.jsx("span",{className:"hidden-xs",children:"Salvar"})]})]})}),e.jsxs("div",{className:"container mt-1",children:[e.jsx("h4",{className:"text-start p-1 px-3 mb-3 mt-3 titulo text-light",style:{backgroundColor:"#00385e",borderRadius:"5px"},children:e.jsxs("a",{className:"btn","data-bs-toggle":"collapse",href:"#formCliente",role:"button","aria-expanded":"true","aria-controls":"formCliente",children:[e.jsx("i",{className:"fa fa-arrow-circle-o-right"}),e.jsx("span",{className:"text-light",children:"Cadastro do cliente"})]})}),e.jsx("div",{className:"collapse show",id:"formCliente",children:e.jsxs("div",{className:"card card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{htmlFor:"nome",children:"Nome"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"nome",name:"nome","aria-describedby":"basic-addon2",value:o.nome,onChange:l})})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"cpfcnpj",children:"CPF"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"cpfcnpj",name:"cpfcnpj","aria-describedby":"basic-addon1",maxLength:"18",value:o.cpfcnpj,onChange:y})})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{htmlFor:"identidade",children:"Nº de Identidade"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"identidade",name:"identidade","aria-describedby":"basic-addon1",maxLength:"18",value:o.identidade,onChange:l})})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{htmlFor:"dataNascimento",children:"Data nascimento"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"date",className:"form-control",id:"dataNascimento",name:"dataNascimento","aria-describedby":"basic-addon3 basic-addon4",value:o.dataNascimento,onInput:l})})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{id:"app",className:"form-group col-md-2",children:[e.jsx("label",{htmlFor:"cep",children:"CEP"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"cep",name:"cep",maxLength:"9",value:o.cep,onChange:S})})]}),e.jsxs("div",{className:"form-group col-md-8",children:[e.jsx("label",{htmlFor:"logradouro",children:"Endereço"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"logradouro",name:"logradouro",value:o.logradouro,onChange:l})})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{children:"Número"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"numero",name:"numero",value:o.numero,onChange:l})})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{htmlFor:"complemento",children:"Complemento"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"complemento",name:"complemento",value:o.complemento,onChange:l})})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{children:"Bairro"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",id:"bairro",name:"bairro",value:o.bairro,onChange:l})})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{children:"Cidade"}),e.jsx("div",{className:"input-group",children:e.jsx("input",{type:"text",className:"form-control",id:"cidade",name:"cidade",value:o.cidade,onChange:l})})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{children:"Estado"}),e.jsx("div",{className:"input-group mb-3",children:e.jsxs("select",{id:"estado",className:"form-select .inner.show{ max-height: 450px !important; }",name:"uf",value:o.uf,onChange:l,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"AC",children:"Acre"}),e.jsx("option",{value:"AL",children:"Alagoas"}),e.jsx("option",{value:"AP",children:"Amapá"}),e.jsx("option",{value:"AM",children:"Amazonas"}),e.jsx("option",{value:"BA",children:"Bahia"}),e.jsx("option",{value:"CE",children:"Ceará"}),e.jsx("option",{value:"DF",children:"Distrito Federal"}),e.jsx("option",{value:"ES",children:"Espírito Santo"}),e.jsx("option",{value:"GO",children:"Goiás"}),e.jsx("option",{value:"MA",children:"Maranhão"}),e.jsx("option",{value:"MT",children:"Mato Grosso"}),e.jsx("option",{value:"MS",children:"Mato Grosso do Sul"}),e.jsx("option",{value:"MG",children:"Minas Gerais"}),e.jsx("option",{value:"PA",children:"Pará"}),e.jsx("option",{value:"PB",children:"Paraíba"}),e.jsx("option",{value:"PR",children:"Paraná"}),e.jsx("option",{value:"PE",children:"Pernambuco"}),e.jsx("option",{value:"PI",children:"Piauí"}),e.jsx("option",{value:"RJ",children:"Rio de Janeiro"}),e.jsx("option",{value:"RN",children:"Rio Grande do Norte"}),e.jsx("option",{value:"RS",children:"Rio Grande do Sul"}),e.jsx("option",{value:"RO",children:"Rondônia"}),e.jsx("option",{value:"RR",children:"Roraima"}),e.jsx("option",{value:"SC",children:"Santa Catarina"}),e.jsx("option",{value:"SP",children:"São Paulo"}),e.jsx("option",{value:"SE",children:"Sergipe"}),e.jsx("option",{value:"TO",children:"Tocantins"})]})})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-5",children:[e.jsx("label",{htmlFor:"email",children:"E-mail"}),e.jsx("div",{className:"input-group",children:e.jsx("input",{type:"text",className:"form-control",id:"email",name:"email",value:o.email,onChange:l})})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{htmlFor:"telefone",children:"Telefone"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"tel",className:"form-control",id:"telefone",name:"telefone",maxLength:"14",value:o.telefone,onChange:A})})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{htmlFor:"telefoneCelular",children:"Celular"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"tel",className:"form-control",id:"telefoneCelular",name:"telefoneCelular",maxLength:"15",value:o.telefoneCelular,onChange:B})})]})]}),e.jsx("input",{type:"hidden",value:o.id}),e.jsx("input",{type:"hidden",value:o.createdAt}),e.jsx("input",{type:"hidden",value:o.createdBy}),e.jsx("input",{type:"hidden",value:o.updatedAt}),e.jsx("input",{type:"hidden",value:o.updatedBy})]})}),e.jsxs(c,{show:N,onHide:v,centered:!0,children:[e.jsx(c.Header,{closeButton:!0,className:`bg-${g()} text-white`,children:e.jsx(c.Title,{children:j==="success"?"Sucesso":"Erro"})}),e.jsx(c.Body,{children:b}),e.jsx(c.Footer,{children:e.jsx(I,{variant:g(),onClick:v,children:"Fechar"})})]})]})]})})})};export{J as default};
