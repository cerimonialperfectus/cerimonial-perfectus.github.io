import{c as j,r as f,j as r}from"./index-FEUtmEKI.js";var C={exports:{}},O=C.exports,L;function F(){return L||(L=1,function(m,E){(function(i,c){c()})(O,function(){function i(t,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function c(t,s,u){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){v(n.response,s,u)},n.onerror=function(){console.error("could not download file")},n.send()}function g(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function x(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var p=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof j=="object"&&j.global===j?j:void 0,k=p.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=p.saveAs||(typeof window!="object"||window!==p?function(){}:"download"in HTMLAnchorElement.prototype&&!k?function(t,s,u){var n=p.URL||p.webkitURL,d=document.createElement("a");s=s||t.name||"download",d.download=s,d.rel="noopener",typeof t=="string"?(d.href=t,d.origin===location.origin?x(d):g(d.href)?c(t,s,u):x(d,d.target="_blank")):(d.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(d.href)},4e4),setTimeout(function(){x(d)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,u){if(s=s||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(i(t,u),s);else if(g(t))c(t,s,u);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){x(n)})}}:function(t,s,u,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return c(t,s,u);var d=t.type==="application/octet-stream",N=/constructor/i.test(p.HTMLElement)||p.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||d&&N||k)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var h=b.result;h=w?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},b.readAsDataURL(t)}else{var y=p.URL||p.webkitURL,S=y.createObjectURL(t);n?n.location=S:location.href=S,n=null,setTimeout(function(){y.revokeObjectURL(S)},4e4)}});p.saveAs=v.saveAs=v,m.exports=v})}(C)),C.exports}var H=F();function M(){const[m,E]=f.useState("Meu Checklist"),[i,c]=f.useState([]),[g,x]=f.useState(""),[p,k]=f.useState(["Evento A","Evento B"]),[v,t]=f.useState(""),[s,u]=f.useState([]);f.useEffect(()=>{const e=localStorage.getItem("checklistCategorias");e&&c(JSON.parse(e));const o=localStorage.getItem("checklistTitulo");o&&E(o);const a=localStorage.getItem("checklistEvento");a&&t(a);const l=localStorage.getItem("checklistHistorico");l&&u(JSON.parse(l))},[]),f.useEffect(()=>{localStorage.setItem("checklistCategorias",JSON.stringify(i))},[i]),f.useEffect(()=>{localStorage.setItem("checklistTitulo",m)},[m]),f.useEffect(()=>{localStorage.setItem("checklistEvento",v)},[v]);const n=()=>{g.trim()&&(c([...i,{nome:g,sessoes:[],novaSessao:""}]),x(""))},d=(e,o)=>{const a=[...i];a[e].nome=o,c(a)},N=e=>{c(i.filter((o,a)=>a!==e))},w=e=>{const o=[...i],a=o[e];a.novaSessao.trim()&&(a.sessoes.push({nome:a.novaSessao,feita:!1}),a.novaSessao="",c(o))},b=(e,o,a)=>{const l=[...i];l[e].sessoes[o].nome=a,c(l)},y=(e,o)=>{const a=[...i];a[e].sessoes.splice(o,1),c(a)},S=(e,o)=>{const a=[...i];a[e].sessoes[o].feita=!a[e].sessoes[o].feita,c(a)},h=()=>{c([]),localStorage.removeItem("checklistCategorias")},A=()=>{const o=[{titulo:m,evento:v,categorias:i,data:new Date().toLocaleString()},...s];u(o),localStorage.setItem("checklistHistorico",JSON.stringify(o)),alert("Checklist salvo!")},R=()=>{let e=`Título: ${m}
Evento: ${v}

`;i.forEach(a=>{e+=`Categoria: ${a.nome}
`,a.sessoes.forEach(l=>{e+=`- ${l.nome} [${l.feita?"Feito":"Pendente"}]
`}),e+=`
`});const o=new Blob([e],{type:"text/csv;charset=utf-8"});H.saveAs(o,`${m.replace(/\s+/g,"_")}.csv`)};return r.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[r.jsx("input",{value:m,onChange:e=>E(e.target.value),className:"text-2xl font-semibold border rounded px-4 py-2 w-full"}),r.jsxs("select",{value:v,onChange:e=>t(e.target.value),className:"border rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"Vincular a evento (opcional)"}),p.map((e,o)=>r.jsx("option",{value:e,children:e},o))]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("input",{type:"text",placeholder:"Nova Categoria",value:g,onChange:e=>x(e.target.value),className:"border px-3 py-2 rounded"}),r.jsx("button",{onClick:n,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Adicionar Categoria"}),r.jsx("button",{onClick:A,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Salvar Checklist"}),r.jsx("button",{onClick:R,className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Exportar Planilha"}),r.jsx("button",{onClick:h,className:"bg-red-600 text-white px-4 py-2 rounded",children:"Limpar"})]}),i.map((e,o)=>r.jsxs("div",{className:"border p-4 bg-gray-50 rounded space-y-2",children:[r.jsx("input",{value:e.nome,onChange:a=>d(o,a.target.value),className:"text-lg font-semibold border-b w-full"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"Adicionar sessão",value:e.novaSessao||"",onChange:a=>{const l=[...i];l[o].novaSessao=a.target.value,c(l)},className:"border px-3 py-1 rounded flex-1"}),r.jsx("button",{onClick:()=>w(o),className:"bg-blue-600 text-white px-3 rounded",children:"Adicionar"}),r.jsx("button",{onClick:()=>N(o),className:"bg-red-600 text-white px-3 rounded",children:"Excluir"})]}),r.jsx("ul",{className:"space-y-1",children:e.sessoes.map((a,l)=>r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:a.feita,onChange:()=>S(o,l)}),r.jsx("input",{value:a.nome,onChange:T=>b(o,l,T.target.value),className:`flex-1 px-2 py-1 border rounded ${a.feita?"line-through text-gray-500":""}`}),r.jsx("button",{onClick:()=>y(o,l),className:"text-red-500 hover:underline",children:"Remover"})]},l))})]},o)),r.jsxs("div",{className:"mt-8",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Histórico de Checklists"}),r.jsx("ul",{className:"space-y-2",children:s.map((e,o)=>r.jsxs("li",{className:"border rounded p-2 bg-white shadow-sm",children:[r.jsx("strong",{children:e.titulo})," - ",e.evento||"Sem evento"," (",e.data,")"]},o))})]})]})}export{M as default};
